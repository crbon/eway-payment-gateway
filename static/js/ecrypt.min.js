!function(o){const a=eway_ecrypt_vars.fields;let s=o(eway_ecrypt_vars.form);const i="function"==typeof String.prototype.repeat?(e,t)=>e.repeat(t):(t,a)=>{let r=t;for(let e=1;e<a;e++)r+=t;return r};function r(e,t){var a,e=s.find(e);if(e.length){var r=e.val().replace(/[\s-]/g,""),n=r.length;if(n){if(t.is_cardnum&&!function(a){let r=0,n=1;for(let t=a.length-1;0<=t;t--){let e=a.charAt(t)*n;n=1===n?2:1,10<=e&&(r++,e-=10),r+=e}return r%10==0}(r))throw{name:"Credit Card Error",message:eway_ecrypt_msg.card_number_invalid,field:e};var r=eCrypt.encryptValue(r,eway_ecrypt_vars.key),c=(a=eway_ecrypt_msg.ecrypt_mask,n=n,(c=t.is_cardnum)?(c=i(a,4))+" "+c+" "+c+" "+c:i(a,n));s.find("input[name='"+t.name+"']").remove(),o("<input type='hidden'>").attr("name",t.name).val(r).appendTo(s),t.false_fill?e.val(c):e.val("").data("eway-old-placeholder",e.prop("placeholder")).prop("placeholder",c)}}}function t(t){try{Object.keys(a).forEach(e=>{r(e,a[e])})}catch(e){return t.preventDefault(),e.field.focus(),window.alert(e.message),!1}return!0}function n(e){e=!!s.length&&s.get(0).elements[e];return!!e&&e.value}function c(){Object.keys(a).forEach(e=>{var t=s.find(e);t.length&&(a[e].false_fill?t.val(""):t.prop("placeholder",t.data("eway-old-placeholder")))})}function l(e){"eway"===n("gateway")&&t(e)}function e(e,t,a){-1!==a.data.indexOf("em_checkout_page_contents")&&(s=o(eway_ecrypt_vars.form),c(),s.on("submit",l))}function p(){s=o(eway_ecrypt_vars.form),Object.keys(a).forEach(e=>{var t=o(e);if(0<t.length&&t.val().substring(0,1)!==eway_ecrypt_msg.ecrypt_mask)try{r(e,a[e])}catch(e){SPCO.form_is_valid=!1,window.event.preventDefault(),e.field.focus(),window.alert(e.message)}})}switch(eway_ecrypt_vars.mode){case"woocommerce":"order_review"===s.prop("id")?s.on("submit",t):s.on("checkout_place_order_eway_payments",t),o(document.body).on("checkout_error",c);break;case"wp-e-commerce":s.on("submit",function(e){"wpsc_merchant_eway"===n("custom_gateway")&&t(e)});break;case"events-manager":s.on("submit",l),o(document).on("em_checkout_page_refresh",function(){o(document).ajaxComplete(e)});break;case"event-espresso":o(document).ready(function(){SPCO.main_container.on("process_next_step_button_click",p)});break;case"awpcp":s.on("submit",t)}}(jQuery);